!function(){"use strict";var t,e,o,n,i,r,s={21:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=r.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.MJContextMenu=void 0;var r,s=o(964),p=o(745),i=(r=s.ContextMenu,i(h,r),h.prototype.post=function(t,e){var o,n;this.mathItem&&(void 0!==e&&(o=this.mathItem.inputJax.name,(n=this.findID("Show","Original")).content="MathML"===o?"Original MathML":o+" Commands",this.findID("Copy","Original").content=n.content,n=this.findID("Settings","semantics"),"MathML"===o?n.disable():n.enable(),this.getAnnotationMenu(),this.dynamicSubmenus()),r.prototype.post.call(this,t,e))},h.prototype.unpost=function(){r.prototype.unpost.call(this),this.mathItem=null},h.prototype.findID=function(){for(var t,e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var i=this,r=null;try{for(var s=l(o),a=s.next();!a.done;a=s.next()){var u=a.value;i?i=(r=i.find(u))instanceof p.Submenu?r.submenu:null:r=null}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r},h.prototype.getAnnotationMenu=function(){var t=this,e=this.getAnnotations(this.getSemanticNode());this.createAnnotationMenu("Show",e,function(){return t.showAnnotation.post()}),this.createAnnotationMenu("Copy",e,function(){return t.copyAnnotation()})},h.prototype.getSemanticNode=function(){for(var t=this.mathItem.root;t&&!t.isKind("semantics");){if(t.isToken||1!==t.childNodes.length)return null;t=t.childNodes[0]}return t},h.prototype.getAnnotations=function(t){var e,o,n=[];if(!t)return n;try{for(var i=l(t.childNodes),r=i.next();!r.done;r=i.next()){var s,a,u=r.value;!u.isKind("annotation")||(s=this.annotationMatch(u))&&(a=u.childNodes.reduce(function(t,e){return t+e.toString()},""),n.push([s,a]))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}return n},h.prototype.annotationMatch=function(t){var e,o,n=t.attributes.get("encoding");try{for(var i=l(Object.keys(this.annotationTypes)),r=i.next();!r.done;r=i.next()){var s=r.value;if(0<=this.annotationTypes[s].indexOf(n))return s}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}return null},h.prototype.createAnnotationMenu=function(t,e,n){var i=this,t=this.findID(t,"Annotation");t.submenu=this.factory.get("subMenu")(this.factory,{items:e.map(function(t){var e=c(t,2),t=e[0],o=e[1];return{type:"command",id:t,content:t,action:function(){i.annotation=o,n()}}}),id:"annotations"},t),e.length?t.enable():t.disable()},h.prototype.dynamicSubmenus=function(){var e,t;try{for(var o=l(h.DynamicSubmenus),n=o.next();!n.done;n=o.next()){var i,r=c(n.value,2),s=r[0],a=r[1],u=this.find(s);u&&(i=a(this,u),(u.submenu=i).items.length?u.enable():u.disable())}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},h.DynamicSubmenus=new Map,h);function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.mathItem=null,t.annotation="",t.annotationTypes={},t}e.MJContextMenu=i},62:function(t,e,o){var n=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=r.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=void 0;var r=o(184),l=o(769),i=o(723),s=o(77),a=o(21),u=o(232),p=o(309),h=o(932),d=o(258),f=o(156),m=o(837),y=i.MathJax,b="undefined"!=typeof window&&window.navigator&&"Mac"===window.navigator.platform.substr(0,3),i=(Object.defineProperty(v.prototype,"isLoading",{get:function(){return 0<v.loading},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"loadingPromise",{get:function(){return this.isLoading?v._loadingPromise=!v._loadingPromise?new Promise(function(t,e){v._loadingOK=t,v._loadingFailed=e}):v._loadingPromise:Promise.resolve()},enumerable:!1,configurable:!0}),v.prototype.initSettings=function(){this.settings=this.options.settings,this.jax=this.options.jax;var t=this.document.outputJax;this.jax[t.name]=t,this.settings.renderer=t.name,y._.a11y&&y._.a11y.explorer&&Object.assign(this.settings,this.document.options.a11y),this.settings.scale=t.options.scale,this.defaultSettings=Object.assign({},this.settings)},v.prototype.initMenu=function(){var o=this,t=new d.Parser([["contextMenu",a.MJContextMenu.fromJson.bind(a.MJContextMenu)]]);this.menu=t.parse({type:"contextMenu",id:"MathJax_Menu",pool:[this.variable("texHints"),this.variable("semantics"),this.variable("zoom"),this.variable("zscale"),this.variable("renderer",function(t){return o.setRenderer(t)}),this.variable("alt"),this.variable("cmd"),this.variable("ctrl"),this.variable("shift"),this.variable("scale",function(t){return o.setScale(t)}),this.variable("explorer",function(t){return o.setExplorer(t)}),this.a11yVar("highlight"),this.a11yVar("backgroundColor"),this.a11yVar("backgroundOpacity"),this.a11yVar("foregroundColor"),this.a11yVar("foregroundOpacity"),this.a11yVar("speech"),this.a11yVar("subtitles"),this.a11yVar("braille"),this.a11yVar("viewBraille"),this.a11yVar("locale",function(t){return SRE.setupEngine({locale:t})}),this.a11yVar("speechRules",function(t){var e=n(t.split("-"),2),t=e[0],e=e[1];o.document.options.sre.domain=t,o.document.options.sre.style=e}),this.a11yVar("magnification"),this.a11yVar("magnify"),this.a11yVar("treeColoring"),this.a11yVar("infoType"),this.a11yVar("infoRole"),this.a11yVar("infoPrefix"),this.variable("autocollapse"),this.variable("collapsible",function(t){return o.setCollapsible(t)}),this.variable("inTabOrder",function(t){return o.setTabOrder(t)}),this.variable("assistiveMml",function(t){return o.setAssistiveMml(t)})],items:[this.submenu("Show","Show Math As",[this.command("MathMLcode","MathML Code",function(){return o.mathmlCode.post()}),this.command("Original","Original Form",function(){return o.originalText.post()}),this.submenu("Annotation","Annotation")]),this.submenu("Copy","Copy to Clipboard",[this.command("MathMLcode","MathML Code",function(){return o.copyMathML()}),this.command("Original","Original Form",function(){return o.copyOriginal()}),this.submenu("Annotation","Annotation")]),this.rule(),this.submenu("Settings","Math Settings",[this.submenu("Renderer","Math Renderer",this.radioGroup("renderer",[["CHTML"],["SVG"]])),this.rule(),this.submenu("ZoomTrigger","Zoom Trigger",[this.command("ZoomNow","Zoom Once Now",function(){return o.zoom(null,"",o.menu.mathItem)}),this.rule(),this.radioGroup("zoom",[["Click"],["DoubleClick","Double-Click"],["NoZoom","No Zoom"]]),this.rule(),this.label("TriggerRequires","Trigger Requires:"),this.checkbox(b?"Option":"Alt",b?"Option":"Alt","alt"),this.checkbox("Command","Command","cmd",{hidden:!b}),this.checkbox("Control","Control","ctrl",{hiddne:b}),this.checkbox("Shift","Shift","shift")]),this.submenu("ZoomFactor","Zoom Factor",this.radioGroup("zscale",[["150%"],["175%"],["200%"],["250%"],["300%"],["400%"]])),this.rule(),this.command("Scale","Scale All Math...",function(){return o.scaleAllMath()}),this.rule(),this.checkbox("texHints","Add TeX hints to MathML","texHints"),this.checkbox("semantics","Add original as annotation","semantics"),this.rule(),this.command("Reset","Reset to defaults",function(){return o.resetDefaults()})]),this.submenu("Accessibility","Accessibility",[this.checkbox("Activate","Activate","explorer"),this.submenu("Speech","Speech",[this.checkbox("Speech","Speech Output","speech"),this.checkbox("Subtitles","Speech Subtitles","subtitles"),this.checkbox("Braille","Braille Output","braille"),this.checkbox("View Braille","Braille Subtitles","viewBraille"),this.rule(),this.submenu("A11yLanguage","Language"),this.rule(),this.submenu("Mathspeak","Mathspeak Rules",this.radioGroup("speechRules",[["mathspeak-default","Verbose"],["mathspeak-brief","Brief"],["mathspeak-sbrief","Superbrief"]])),this.submenu("Clearspeak","Clearspeak Rules",this.radioGroup("speechRules",[["clearspeak-default","Auto"]])),this.submenu("ChromeVox","ChromeVox Rules",this.radioGroup("speechRules",[["chromevox-default","Standard"],["chromevox-alternative","Alternative"]]))]),this.submenu("Highlight","Highlight",[this.submenu("Background","Background",this.radioGroup("backgroundColor",[["Blue"],["Red"],["Green"],["Yellow"],["Cyan"],["Magenta"],["White"],["Black"]])),{type:"slider",variable:"backgroundOpacity",content:" "},this.submenu("Foreground","Foreground",this.radioGroup("foregroundColor",[["Black"],["White"],["Magenta"],["Cyan"],["Yellow"],["Green"],["Red"],["Blue"]])),{type:"slider",variable:"foregroundOpacity",content:" "},this.rule(),this.radioGroup("highlight",[["None"],["Hover"],["Flame"]]),this.rule(),this.checkbox("TreeColoring","Tree Coloring","treeColoring")]),this.submenu("Magnification","Magnification",[this.radioGroup("magnification",[["None"],["Keyboard"],["Mouse"]]),this.rule(),this.radioGroup("magnify",[["200%"],["300%"],["400%"],["500%"]])]),this.submenu("Semantic Info","Semantic Info",[this.checkbox("Type","Type","infoType"),this.checkbox("Role","Role","infoRole"),this.checkbox("Prefix","Prefix","infoPrefix")],!0),this.rule(),this.checkbox("Collapsible","Collapsible Math","collapsible"),this.checkbox("AutoCollapse","Auto Collapse","autocollapse",{disabled:!0}),this.rule(),this.checkbox("InTabOrder","Include in Tab Order","inTabOrder"),this.checkbox("AssistiveMml","Include Hidden MathML","assistiveMml")]),this.submenu("Language","Language"),this.rule(),this.command("About","About MathJax",function(){return o.about.post()}),this.command("Help","MathJax Help",function(){return o.help.post()})]});t=this.menu;this.about.attachMenu(t),this.help.attachMenu(t),this.originalText.attachMenu(t),this.annotationText.attachMenu(t),this.mathmlCode.attachMenu(t),this.zoomBox.attachMenu(t),this.checkLoadableItems(),this.enableExplorerItems(this.settings.explorer),t.showAnnotation=this.annotationText,t.copyAnnotation=this.copyAnnotation.bind(this),t.annotationTypes=this.options.annotationTypes,m.CssStyles.addInfoStyles(this.document.document),m.CssStyles.addMenuStyles(this.document.document)},v.prototype.checkLoadableItems=function(){var t,e;if(y&&y._&&y.loader&&y.startup)!this.settings.collapsible||y._.a11y&&y._.a11y.complexity||this.loadA11y("complexity"),!this.settings.explorer||y._.a11y&&y._.a11y.explorer||this.loadA11y("explorer"),!this.settings.assistiveMml||y._.a11y&&y._.a11y["assistive-mml"]||this.loadA11y("assistive-mml");else{var o=this.menu;try{for(var n=c(Object.keys(this.jax)),i=n.next();!i.done;i=n.next()){var r=i.value;this.jax[r]||o.findID("Settings","Renderer",r).disable()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}o.findID("Accessibility","Activate").disable(),o.findID("Accessibility","AutoCollapse").disable(),o.findID("Accessibility","Collapsible").disable()}},v.prototype.enableExplorerItems=function(t){var e,o,n=this.menu.findID("Accessibility","Activate").menu;try{for(var i=c(n.items.slice(1)),r=i.next();!r.done;r=i.next()){var s=r.value;if(s instanceof f.Rule)break;t?s.enable():s.disable()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}},v.prototype.mergeUserSettings=function(){try{var t=localStorage.getItem(v.MENU_STORAGE);if(!t)return;Object.assign(this.settings,JSON.parse(t)),this.setA11y(this.settings)}catch(t){console.log("MathJax localStorage error: "+t.message)}},v.prototype.saveUserSettings=function(){var e,t,o={};try{for(var n=c(Object.keys(this.settings)),i=n.next();!i.done;i=n.next()){var r=i.value;this.settings[r]!==this.defaultSettings[r]&&(o[r]=this.settings[r])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}try{Object.keys(o).length?localStorage.setItem(v.MENU_STORAGE,JSON.stringify(o)):localStorage.removeItem(v.MENU_STORAGE)}catch(t){console.log("MathJax localStorage error: "+t.message)}},v.prototype.setA11y=function(t){y._.a11y&&y._.a11y.explorer&&y._.a11y.explorer_ts.setA11yOptions(this.document,t)},v.prototype.getA11y=function(t){if(y._.a11y&&y._.a11y.explorer)return(void 0!==this.document.options.a11y[t]?this.document.options.a11y:this.document.options.sre)[t]},v.prototype.setScale=function(t){this.document.outputJax.options.scale=parseFloat(t),this.document.rerender()},v.prototype.setRenderer=function(e){var o,n=this;this.jax[e]?this.setOutputJax(e):(o=e.toLowerCase(),this.loadComponent("output/"+o,function(){var t=y.startup;o in t.constructors&&(t.useOutput(o,!0),t.output=t.getOutputJax(),n.jax[e]=t.output,n.setOutputJax(e))}))},v.prototype.setOutputJax=function(t){this.jax[t].setAdaptor(this.document.adaptor),this.document.outputJax=this.jax[t],this.rerender()},v.prototype.setTabOrder=function(t){this.menu.store.inTaborder(t)},v.prototype.setAssistiveMml=function(t){!(this.document.options.enableAssistiveMml=t)||y._.a11y&&y._.a11y["assistive-mml"]?this.rerender():this.loadA11y("assistive-mml")},v.prototype.setExplorer=function(t){this.enableExplorerItems(t),!(this.document.options.enableExplorer=t)||y._.a11y&&y._.a11y.explorer?this.rerender(this.settings.collapsible?l.STATE.RERENDER:l.STATE.COMPILED):this.loadA11y("explorer")},v.prototype.setCollapsible=function(t){!(this.document.options.enableComplexity=t)||y._.a11y&&y._.a11y.complexity?this.rerender(l.STATE.COMPILED):this.loadA11y("complexity")},v.prototype.scaleAllMath=function(){var t=(100*parseFloat(this.settings.scale)).toFixed(1).replace(/.0$/,""),t=prompt("Scale all mathematics (compared to surrounding text) by",t+"%");t&&(t.match(/^\s*\d+(\.\d*)?\s*%?\s*$/)?(t=parseFloat(t)/100)?this.setScale(String(t)):alert("The scale should not be zero"):alert("The scale should be a percentage (e.g., 120%)"))},v.prototype.resetDefaults=function(){var e,t;v.loading++;var o=this.menu.pool,n=this.defaultSettings;try{for(var i=c(Object.keys(this.settings)),r=i.next();!r.done;r=i.next()){var s,a=r.value,u=o.lookup(a);u?(u.setValue(n[a]),(s=u.items[0])&&s.executeCallbacks_()):this.settings[a]=n[a]}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}v.loading--,this.rerender(l.STATE.COMPILED)},v.prototype.checkComponent=function(t){t=v.loadingPromises.get(t);t&&r.mathjax.retryAfter(t)},v.prototype.loadComponent=function(t,e){var o;v.loadingPromises.has(t)||(o=y.loader)&&(v.loading++,o=o.load(t).then(function(){v.loading--,v.loadingPromises.delete(t),e(),0===v.loading&&v._loadingPromise&&(v._loadingPromise=null,v._loadingOK())}).catch(function(t){v._loadingPromise?(v._loadingPromise=null,v._loadingFailed(t)):console.log(t)}),v.loadingPromises.set(t,o))},v.prototype.loadA11y=function(o){var n=this,i=!l.STATE.ENRICHED;this.loadComponent("a11y/"+o,function(){var t=y.startup;r.mathjax.handlers.unregister(t.handler),t.handler=t.getHandler(),r.mathjax.handlers.register(t.handler);var e=n.document;n.document=t.document=t.getDocument(),(n.document.menu=n).document.outputJax.reset(),n.transferMathList(e),n.document.processed=e.processed,v._loadingPromise||(n.document.outputJax.reset(),n.rerender("complexity"===o||i?l.STATE.COMPILED:l.STATE.TYPESET))})},v.prototype.transferMathList=function(t){var e,o,n=this.document.options.MathItem;try{for(var i=c(t.math),r=i.next();!r.done;r=i.next()){var s=r.value,a=new n;Object.assign(a,s),this.document.math.push(a)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}},v.prototype.formatSource=function(t){return t.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},v.prototype.toMML=function(t){return this.MmlVisitor.visitTree(t.root,t,{texHints:this.settings.texHints,semantics:this.settings.semantics&&"MathML"!==t.inputJax.name})},v.prototype.zoom=function(t,e,o){t&&!this.isZoomEvent(t,e)||(this.menu.mathItem=o,t&&this.menu.post(t),this.zoomBox.post())},v.prototype.isZoomEvent=function(t,e){return this.settings.zoom===e&&(!this.settings.alt||t.altKey)&&(!this.settings.ctrl||t.ctrlKey)&&(!this.settings.cmd||t.metaKey)&&(!this.settings.shift||t.shiftKey)},v.prototype.rerender=function(t){void 0===t&&(t=l.STATE.TYPESET),this.rerenderStart=Math.min(t,this.rerenderStart),v.loading||(this.rerenderStart<=l.STATE.COMPILED&&this.document.reset({inputJax:[]}),this.document.rerender(this.rerenderStart),this.rerenderStart=l.STATE.LAST)},v.prototype.copyMathML=function(){this.copyToClipboard(this.toMML(this.menu.mathItem))},v.prototype.copyOriginal=function(){this.copyToClipboard(this.menu.mathItem.math.trim())},v.prototype.copyAnnotation=function(){this.copyToClipboard(this.menu.annotation.trim())},v.prototype.copyToClipboard=function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.cssText="height: 1px; width: 1px; padding: 1px; position: absolute; left: -10px",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(t){alert("Can't copy to clipboard: "+t.message)}document.body.removeChild(e)},v.prototype.addMenu=function(e){var o=this,t=e.typesetRoot;t.addEventListener("contextmenu",function(){return o.menu.mathItem=e},!0),t.addEventListener("keydown",function(){return o.menu.mathItem=e},!0),t.addEventListener("click",function(t){return o.zoom(t,"Click",e)},!0),t.addEventListener("dblclick",function(t){return o.zoom(t,"DoubleClick",e)},!0),this.menu.store.insert(t)},v.prototype.clear=function(){this.menu.store.clear()},v.prototype.variable=function(e,o){var n=this;return{name:e,getter:function(){return n.settings[e]},setter:function(t){n.settings[e]=t,o&&o(t),n.saveUserSettings()}}},v.prototype.a11yVar=function(o,n){var i=this;return{name:o,getter:function(){return i.getA11y(o)},setter:function(t){i.settings[o]=t;var e={};e[o]=t,i.setA11y(e),n&&n(t),i.saveUserSettings()}}},v.prototype.submenu=function(t,e,o,n){var i,r;void 0===o&&(o=[]),void 0===n&&(n=!1);var s=[];try{for(var a=c(o),u=a.next();!u.done;u=a.next()){var l=u.value;Array.isArray(l)?s=s.concat(l):s.push(l)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return{type:"submenu",id:t,content:e,menu:{items:s},disabled:0===s.length||n}},v.prototype.command=function(t,e,o,n){return void 0===n&&(n={}),Object.assign({type:"command",id:t,content:e,action:o},n)},v.prototype.checkbox=function(t,e,o,n){return void 0===n&&(n={}),Object.assign({type:"checkbox",id:t,content:e,variable:o},n)},v.prototype.radioGroup=function(e,t){var o=this;return t.map(function(t){return o.radio(t[0],t[1]||t[0],e)})},v.prototype.radio=function(t,e,o,n){return void 0===n&&(n={}),Object.assign({type:"radio",id:t,content:e,variable:o},n)},v.prototype.label=function(t,e){return{type:"label",id:t,content:e}},v.prototype.rule=function(){return{type:"rule"}},v.MENU_STORAGE="MathJax-Menu-Settings",v.OPTIONS={settings:{texHints:!0,semantics:!1,zoom:"NoZoom",zscale:"200%",renderer:"CHTML",alt:!1,cmd:!1,ctrl:!1,shift:!1,scale:1,autocollapse:!1,collapsible:!1,inTabOrder:!0,assistiveMml:!0,explorer:!1},jax:{CHTML:null,SVG:null},annotationTypes:s.expandable({TeX:["TeX","LaTeX","application/x-tex"],StarMath:["StarMath 5.0"],Maple:["Maple"],ContentMathML:["MathML-Content","application/mathml-content+xml"],OpenMath:["OpenMath"]})},v.loading=0,v.loadingPromises=new Map,v._loadingPromise=null,v._loadingOK=null,v._loadingFailed=null,v);function v(t,e){var o=this;void 0===e&&(e={}),this.settings=null,this.defaultSettings=null,this.menu=null,this.MmlVisitor=new u.MmlVisitor,this.jax={CHTML:null,SVG:null},this.rerenderStart=l.STATE.LAST,this.about=new h.Info('<b style="font-size:120%;">MathJax</b> v'+r.mathjax.version,function(){var t=[];return t.push("Input Jax: "+o.document.inputJax.map(function(t){return t.name}).join(", ")),t.push("Output Jax: "+o.document.outputJax.name),t.push("Document Type: "+o.document.kind),t.join("<br/>")},'<a href="https://www.mathjax.org">www.mathjax.org</a>'),this.help=new h.Info("<b>MathJax Help</b>",function(){return["<p><b>MathJax</b> is a JavaScript library that allows page"," authors to include mathematics within their web pages."," As a reader, you don't need to do anything to make that happen.</p>","<p><b>Browsers</b>: MathJax works with all modern browsers including"," Edge, Firefox, Chrome, Safari, Opera, and most mobile browsers.</p>","<p><b>Math Menu</b>: MathJax adds a contextual menu to equations."," Right-click or CTRL-click on any mathematics to access the menu.</p>",'<div style="margin-left: 1em;">',"<p><b>Show Math As:</b> These options allow you to view the formula's"," source markup (as MathML or in its original format).</p>","<p><b>Copy to Clipboard:</b> These options copy the formula's source markup,"," as MathML or in its original format, to the clipboard"," (in browsers that support that).</p>","<p><b>Math Settings:</b> These give you control over features of MathJax,"," such the size of the mathematics, and the mechanism used"," to display equations.</p>","<p><b>Accessibility</b>: MathJax can work with screen"," readers to make mathematics accessible to the visually impaired."," Turn on the explorer to enable generation of speech strings"," and the ability to investigate expressions interactively.</p>","<p><b>Language</b>: This menu lets you select the language used by MathJax"," for its menus and warning messages. (Not yet implemented in version 3.)</p>","</div>","<p><b>Math Zoom</b>: If you are having difficulty reading an"," equation, MathJax can enlarge it to help you see it better, or"," you can scall all the math on the page to make it larger."," Turn these features on in the <b>Math Settings</b> menu.</p>","<p><b>Preferences</b>: MathJax uses your browser's localStorage database"," to save the preferences set via this menu locally in your browser.  These"," are not used to track you, and are not transferred or used remotely by"," MathJax in any way.</p>"].join("\n")},'<a href="https://www.mathjax.org">www.mathjax.org</a>'),this.mathmlCode=new p.SelectableInfo("MathJax MathML Expression",function(){if(!o.menu.mathItem)return"";var t=o.toMML(o.menu.mathItem);return"<pre>"+o.formatSource(t)+"</pre>"},""),this.originalText=new p.SelectableInfo("MathJax Original Source",function(){if(!o.menu.mathItem)return"";var t=o.menu.mathItem.math;return'<pre style="font-size:125%; margin:0">'+o.formatSource(t)+"</pre>"},""),this.annotationText=new p.SelectableInfo("MathJax Annotation Text",function(){if(!o.menu.mathItem)return"";var t=o.menu.annotation;return'<pre style="font-size:125%; margin:0">'+o.formatSource(t)+"</pre>"},""),this.zoomBox=new h.Info("MathJax Zoomed Expression",function(){if(!o.menu.mathItem)return"";var t=o.menu.mathItem.typesetRoot.cloneNode(!0);return t.style.margin="0",'<div style="font-size: '+1.25*parseFloat(o.settings.zscale)+'%">'+t.outerHTML+"</div>"},""),this.document=t,this.options=s.userOptions(s.defaultOptions({},this.constructor.OPTIONS),e),this.initSettings(),this.mergeUserSettings(),this.initMenu()}e.Menu=i},3:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=r.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s},u=this&&this.__spreadArray||function(t,e){for(var o=0,n=e.length,i=t.length;o<n;o++,i++)t[i]=e[o];return t},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuHandler=e.MenuMathDocumentMixin=e.MenuMathItemMixin=void 0;var c=o(184),p=o(769),h=o(77),d=o(62);function f(t){return r(e,o=t),e.prototype.addMenu=function(t,e){void 0===e&&(e=!1),this.state()>=p.STATE.CONTEXT_MENU||(this.isEscaped||!t.options.enableMenu&&!e||t.menu.addMenu(this),this.state(p.STATE.CONTEXT_MENU))},e.prototype.checkLoading=function(t){t.checkLoading()},e;function e(){return null!==o&&o.apply(this,arguments)||this}var o}function i(t){var e,i;return r(o,i=t),o.prototype.addMenu=function(){var t,e;if(!this.processed.isSet("context-menu")){try{for(var o=l(this.math),n=o.next();!n.done;n=o.next())n.value.addMenu(this)}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}this.processed.set("context-menu")}return this},o.prototype.checkLoading=function(){this.menu.isLoading&&c.mathjax.retryAfter(this.menu.loadingPromise.catch(function(t){return console.log(t)}));var t=this.menu.settings;return t.collapsible&&(this.options.enableComplexity=!0,this.menu.checkComponent("a11y/complexity")),t.explorer&&(this.options.enableEnrichment=!0,this.options.enableExplorer=!0,this.menu.checkComponent("a11y/explorer")),this},o.prototype.state=function(t,e){return i.prototype.state.call(this,t,e=void 0===e?!1:e),t<p.STATE.CONTEXT_MENU&&this.processed.clear("context-menu"),this},o.prototype.updateDocument=function(){return i.prototype.updateDocument.call(this),this.menu.menu.store.sort(),this},(e=o).OPTIONS=s(s({enableEnrichment:!0,enableComplexity:!0,enableExplorer:!0,enrichSpeech:"none",enrichError:function(t,e,o){return console.warn("Enrichment Error:",o)}},t.OPTIONS),{MenuClass:d.Menu,menuOptions:d.Menu.OPTIONS,enableMenu:!0,sre:t.OPTIONS.sre||h.expandable({}),a11y:t.OPTIONS.a11y||h.expandable({}),renderActions:h.expandable(s(s({},t.OPTIONS.renderActions),{addMenu:[p.STATE.CONTEXT_MENU],checkLoading:[p.STATE.UNPROCESSED+1]}))}),e;function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=i.apply(this,u([],a(t)))||this;o.menu=new o.options.MenuClass(o,o.options.menuOptions);var n=o.constructor.ProcessBits;return n.has("context-menu")||n.allocate("context-menu"),o.options.MathItem=f(o.options.MathItem),o}}p.newState("CONTEXT_MENU",170),e.MenuMathItemMixin=f,e.MenuMathDocumentMixin=i,e.MenuHandler=function(t){return t.documentClass=i(t.documentClass),t}},232:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.MmlVisitor=void 0;var r,s=o(433),a=o(77),i=(r=s.SerializedMmlVisitor,i(u,r),u.prototype.visitTree=function(t,e,o){return void 0===o&&(o={}),this.mathItem=e=void 0===e?null:e,a.userOptions(this.options,o),this.visitNode(t,"")},u.prototype.visitTeXAtomNode=function(t,e){return this.options.texHints?r.prototype.visitTeXAtomNode.call(this,t,e):t.childNodes[0]&&1===t.childNodes[0].childNodes.length?this.visitNode(t.childNodes[0],e):e+"<mrow"+this.getAttributes(t)+">\n"+this.childNodeMml(t,e+"  ","\n")+e+"</mrow>"},u.prototype.visitMathNode=function(t,e){if(!this.options.semantics||"TeX"!==this.mathItem.inputJax.name)return r.prototype.visitDefault.call(this,t,e);var o=t.childNodes.length&&1<t.childNodes[0].childNodes.length;return e+"<math"+this.getAttributes(t)+">\n"+e+"  <semantics>\n"+(o?e+"    <mrow>\n":"")+this.childNodeMml(t,e+(o?"      ":"    "),"\n")+(o?e+"    </mrow>\n":"")+e+'    <annotation encoding="application/x-tex">'+this.mathItem.math+"</annotation>\n"+e+"  </semantics>\n"+e+"</math>"},u);function u(){var t=null!==r&&r.apply(this,arguments)||this;return t.options={texHints:!0,semantics:!1},t.mathItem=null,t}e.MmlVisitor=i},309:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.SelectableInfo=void 0;var r,s=o(932),a=o(698),i=(r=s.Info,i(u,r),u.prototype.addEvents=function(t){var e=this;t.addEventListener("keypress",function(t){"a"===t.key&&(t.ctrlKey||t.metaKey)&&(e.selectAll(),e.stop(t))})},u.prototype.selectAll=function(){document.getSelection().selectAllChildren(this.html.querySelector("pre"))},u.prototype.copyToClipboard=function(){this.selectAll();try{document.execCommand("copy")}catch(t){alert("Can't copy to clipboard: "+t.message)}document.getSelection().removeAllRanges()},u.prototype.generateHtml=function(){var e=this;r.prototype.generateHtml.call(this);var t=this.html.querySelector("span."+a.HtmlClasses.INFOSIGNATURE).appendChild(document.createElement("input"));t.type="button",t.value="Copy to Clipboard",t.addEventListener("click",function(t){return e.copyToClipboard()})},u);function u(){return null!==r&&r.apply(this,arguments)||this}e.SelectableInfo=i},723:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=MathJax._.components.global.isObject,e.combineConfig=MathJax._.components.global.combineConfig,e.combineDefaults=MathJax._.components.global.combineDefaults,e.combineWithMathJax=MathJax._.components.global.combineWithMathJax,e.MathJax=MathJax._.components.global.MathJax},769:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.protoItem=MathJax._.core.MathItem.protoItem,e.AbstractMathItem=MathJax._.core.MathItem.AbstractMathItem,e.STATE=MathJax._.core.MathItem.STATE,e.newState=MathJax._.core.MathItem.newState},433:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DATAMJX=MathJax._.core.MmlTree.SerializedMmlVisitor.DATAMJX,e.toEntity=MathJax._.core.MmlTree.SerializedMmlVisitor.toEntity,e.SerializedMmlVisitor=MathJax._.core.MmlTree.SerializedMmlVisitor.SerializedMmlVisitor},184:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.mathjax=MathJax._.mathjax.mathjax},77:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=MathJax._.util.Options.isObject,e.APPEND=MathJax._.util.Options.APPEND,e.REMOVE=MathJax._.util.Options.REMOVE,e.OPTIONS=MathJax._.util.Options.OPTIONS,e.Expandable=MathJax._.util.Options.Expandable,e.expandable=MathJax._.util.Options.expandable,e.makeArray=MathJax._.util.Options.makeArray,e.keys=MathJax._.util.Options.keys,e.copy=MathJax._.util.Options.copy,e.insert=MathJax._.util.Options.insert,e.defaultOptions=MathJax._.util.Options.defaultOptions,e.userOptions=MathJax._.util.Options.userOptions,e.selectOptions=MathJax._.util.Options.selectOptions,e.selectOptionsFromKeys=MathJax._.util.Options.selectOptionsFromKeys,e.separateOptions=MathJax._.util.Options.separateOptions,e.lookup=MathJax._.util.Options.lookup},612:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractEntry=void 0;var r,s=o(943),a=o(698),i=(r=s.MenuElement,i(u,r),Object.defineProperty(u.prototype,"menu",{get:function(){return this._menu},set:function(t){this._menu=t},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),u.prototype.hide=function(){this.hidden=!0,this.menu.generateMenu()},u.prototype.show=function(){this.hidden=!1,this.menu.generateMenu()},u.prototype.isHidden=function(){return this.hidden},u);function u(t,e){var o=r.call(this)||this;return o._menu=t,o._type=e,o.className=a.HtmlClasses.MENUITEM,o.role="menuitem",o.hidden=!1,o}e.AbstractEntry=i},341:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractItem=void 0;var s,a=o(612),u=o(865),l=o(698),i=(s=a.AbstractEntry,i(c,s),Object.defineProperty(c.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.generateHtml(),this.menu&&this.menu.generateHtml()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),c.prototype.press=function(){this.disabled||(this.executeAction(),this.executeCallbacks_())},c.prototype.executeAction=function(){},c.prototype.registerCallback=function(t){-1===this.callbacks.indexOf(t)&&this.callbacks.push(t)},c.prototype.unregisterCallback=function(t){t=this.callbacks.indexOf(t);-1!==t&&this.callbacks.splice(t,1)},c.prototype.mousedown=function(t){this.press(),this.stop(t)},c.prototype.mouseover=function(t){this.focus(),this.stop(t)},c.prototype.mouseout=function(t){this.deactivate(),this.stop(t)},c.prototype.generateHtml=function(){s.prototype.generateHtml.call(this);var t=this.html;t.setAttribute("aria-disabled","false"),t.textContent=this.content},c.prototype.activate=function(){this.disabled||this.html.classList.add(l.HtmlClasses.MENUACTIVE)},c.prototype.deactivate=function(){this.html.classList.remove(l.HtmlClasses.MENUACTIVE)},c.prototype.focus=function(){this.menu.focused=this,s.prototype.focus.call(this),this.activate()},c.prototype.unfocus=function(){this.deactivate(),s.prototype.unfocus.call(this)},c.prototype.escape=function(t){u.MenuUtil.close(this)},c.prototype.up=function(t){this.menu.up(t)},c.prototype.down=function(t){this.menu.down(t)},c.prototype.left=function(t){this.menu.left(t)},c.prototype.right=function(t){this.menu.right(t)},c.prototype.space=function(t){this.press()},c.prototype.disable=function(){this.disabled=!0;var t=this.html;t.classList.add(l.HtmlClasses.MENUDISABLED),t.setAttribute("aria-disabled","true")},c.prototype.enable=function(){this.disabled=!1;var t=this.html;t.classList.remove(l.HtmlClasses.MENUDISABLED),t.removeAttribute("aria-disabled")},c.prototype.executeCallbacks_=function(){var t,e;try{for(var o=r(this.callbacks),n=o.next();!n.done;n=o.next()){var i=n.value;try{i(this)}catch(t){u.MenuUtil.error(t,"Callback for menu entry "+this.id+" failed.")}}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},c);function c(t,e,o,n){e=s.call(this,t,e)||this;return e._content=o,e.disabled=!1,e.callbacks=[],e._id=n||o,e}e.AbstractItem=i},585:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractMenu=void 0;var r,s=o(757),u=o(341),l=o(698),c=o(745),i=(r=s.AbstractPostable,i(p,r),Object.defineProperty(p.prototype,"baseMenu",{get:function(){return this._baseMenu},set:function(t){this._baseMenu=t},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"pool",{get:function(){return this.variablePool},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"focused",{get:function(){return this._focused},set:function(t){var e;this._focused!==t&&(this._focused||this.unfocus(),e=this._focused,this._focused=t,e&&e.unfocus())},enumerable:!1,configurable:!0}),p.prototype.up=function(t){var e,o=this.items.filter(function(t){return t instanceof u.AbstractItem&&!t.isHidden()});0!==o.length&&(this.focused?-1!==(e=o.indexOf(this.focused))&&o[e=e?--e:o.length-1].focus():o[o.length-1].focus())},p.prototype.down=function(t){var e,o=this.items.filter(function(t){return t instanceof u.AbstractItem&&!t.isHidden()});0!==o.length&&(this.focused?-1!==(e=o.indexOf(this.focused))&&o[e=++e===o.length?0:e].focus():o[0].focus())},p.prototype.generateHtml=function(){r.prototype.generateHtml.call(this),this.generateMenu()},p.prototype.generateMenu=function(){var t,e,o=this.html;o.classList.add(l.HtmlClasses.MENU);try{for(var n=a(this.items),i=n.next();!i.done;i=n.next()){var r,s=i.value;s.isHidden()?(r=s.html).parentNode&&r.parentNode.removeChild(r):o.appendChild(s.html)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},p.prototype.post=function(t,e){this.variablePool.update(),r.prototype.post.call(this,t,e)},p.prototype.unpostSubmenus=function(){var t,e,o=this.items.filter(function(t){return t instanceof c.Submenu});try{for(var n=a(o),i=n.next();!i.done;i=n.next()){var r=i.value;r.submenu.unpost(),r!==this.focused&&r.unfocus()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},p.prototype.unpost=function(){r.prototype.unpost.call(this),this.unpostSubmenus(),this.focused=null},p.prototype.find=function(t){var e,o;try{for(var n=a(this.items),i=n.next();!i.done;i=n.next()){var r=i.value;if("rule"!==r.type){if(r.id===t)return r;if("submenu"===r.type){var s=r.submenu.find(t);if(s)return s}}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}return null},p);function p(){var t=null!==r&&r.apply(this,arguments)||this;return t.className=l.HtmlClasses.CONTEXTMENU,t.role="menu",t._items=[],t._baseMenu=null,t}e.AbstractMenu=i},817:function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractNavigatable=void 0;var n=o(635),i=o(674),o=(r.prototype.bubbleKey=function(){this.bubble=!0},r.prototype.keydown=function(t){switch(t.keyCode){case n.KEY.ESCAPE:this.escape(t);break;case n.KEY.RIGHT:this.right(t);break;case n.KEY.LEFT:this.left(t);break;case n.KEY.UP:this.up(t);break;case n.KEY.DOWN:this.down(t);break;case n.KEY.RETURN:case n.KEY.SPACE:this.space(t);break;default:return}this.bubble?this.bubble=!1:this.stop(t)},r.prototype.escape=function(t){},r.prototype.space=function(t){},r.prototype.left=function(t){},r.prototype.right=function(t){},r.prototype.up=function(t){},r.prototype.down=function(t){},r.prototype.stop=function(t){t&&(t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0)},r.prototype.mousedown=function(t){return this.stop(t)},r.prototype.mouseup=function(t){return this.stop(t)},r.prototype.mouseover=function(t){return this.stop(t)},r.prototype.mouseout=function(t){return this.stop(t)},r.prototype.click=function(t){return this.stop(t)},r.prototype.addEvents=function(t){t.addEventListener(i.MOUSE.DOWN,this.mousedown.bind(this)),t.addEventListener(i.MOUSE.UP,this.mouseup.bind(this)),t.addEventListener(i.MOUSE.OVER,this.mouseover.bind(this)),t.addEventListener(i.MOUSE.OUT,this.mouseout.bind(this)),t.addEventListener(i.MOUSE.CLICK,this.click.bind(this)),t.addEventListener("keydown",this.keydown.bind(this)),t.addEventListener("dragstart",this.stop.bind(this)),t.addEventListener(i.MOUSE.SELECTSTART,this.stop.bind(this)),t.addEventListener("contextmenu",this.stop.bind(this)),t.addEventListener(i.MOUSE.DBLCLICK,this.stop.bind(this))},r);function r(){this.bubble=!1}e.AbstractNavigatable=o},757:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractPostable=void 0;var r,i=(r=o(943).MenuElement,i(s,r),s.prototype.isPosted=function(){return this.posted},s.prototype.post=function(t,e){this.posted||(void 0!==t&&void 0!==e&&this.html.setAttribute("style","left: "+t+"px; top: "+e+"px;"),this.display(),this.posted=!0)},s.prototype.unpost=function(){var t;this.posted&&((t=this.html).parentNode&&t.parentNode.removeChild(t),this.posted=!1)},s);function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.posted=!1,t}e.AbstractPostable=i},467:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractVariableItem=void 0;var r,i=(r=o(341).AbstractItem,i(s,r),s.prototype.generateHtml=function(){r.prototype.generateHtml.call(this);var t=this.html;this.span||this.generateSpan(),t.appendChild(this.span),this.update()},s.prototype.register=function(){this.variable.register(this)},s.prototype.unregister=function(){this.variable.unregister(this)},s.prototype.update=function(){this.updateAria(),this.span&&this.updateSpan()},s);function s(){return null!==r&&r.apply(this,arguments)||this}e.AbstractVariableItem=i},725:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.CloseButton=void 0;var r,s=o(757),a=o(698),i=(r=s.AbstractPostable,i(u,r),u.prototype.generateHtml=function(){var t=document.createElement("span");t.classList.add(this.className),t.setAttribute("role",this.role),t.setAttribute("tabindex","0");var e=document.createElement("span");e.textContent="×",t.appendChild(e),this.html=t},u.prototype.display=function(){},u.prototype.unpost=function(){r.prototype.unpost.call(this),this.element.unpost()},u.prototype.keydown=function(t){this.bubbleKey(),r.prototype.keydown.call(this,t)},u.prototype.space=function(t){this.unpost(),this.stop(t)},u.prototype.mousedown=function(t){this.unpost(),this.stop(t)},u);function u(t){var e=r.call(this)||this;return e.element=t,e.className=a.HtmlClasses.MENUCLOSE,e.role="button",e}e.CloseButton=i},964:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenu=void 0;var s,r=o(585),a=o(698),u=o(525),l=o(79),i=(s=r.AbstractMenu,i(c,s),c.fromJson=function(e,t){var o=t.pool,n=t.items,t=t.id,t=void 0===t?"":t,i=new this(e);i.id=t;var r=e.get("variable");o.forEach(function(t){return r(e,t,i.pool)});n=e.get("items")(e,n,i);return i.items=n,i},c.prototype.generateHtml=function(){this.isPosted()&&this.unpost(),s.prototype.generateHtml.call(this),this._frame=document.createElement("div"),this._frame.classList.add(a.HtmlClasses.MENUFRAME);var t="left: 0px; top: 0px; z-index: 200; width: 100%; height: 100%; border: 0px; padding: 0px; margin: 0px;";this._frame.setAttribute("style","position: absolute; "+t);var e=document.createElement("div");e.setAttribute("style","position: fixed; "+t),this._frame.appendChild(e),e.addEventListener("mousedown",function(t){this.unpost(),this.unpostWidgets(),this.stop(t)}.bind(this))},c.prototype.display=function(){document.body.appendChild(this.frame),this.frame.appendChild(this.html),this.focus()},c.prototype.escape=function(t){this.unpost(),this.unpostWidgets()},c.prototype.unpost=function(){var t;s.prototype.unpost.call(this),0<this.widgets.length||(this.frame.parentNode.removeChild(this.frame),t=this.store,this.moving||t.insertTaborder(),t.active.focus())},c.prototype.left=function(t){this.move_(this.store.previous())},c.prototype.right=function(t){this.move_(this.store.next())},Object.defineProperty(c.prototype,"frame",{get:function(){return this._frame},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),c.prototype.post=function(t,e){if(void 0!==e)return this.moving||this.store.removeTaborder(),void s.prototype.post.call(this,t,e);var o,n,i=t;i instanceof Event?(r=i.target,this.stop(i)):r=i,i instanceof MouseEvent&&(o=i.pageX,n=i.pageY,o||n||!i.clientX||(o=i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=i.clientY+document.body.scrollTop+document.documentElement.scrollTop)),o||n||!r||(e=window.pageXOffset||document.documentElement.scrollLeft,t=window.pageYOffset||document.documentElement.scrollTop,o=((i=r.getBoundingClientRect()).right+i.left)/2+e,n=(i.bottom+i.top)/2+t),this.store.active=r,this.anchor=this.store.active;var r=this.html;o+r.offsetWidth>document.body.offsetWidth-5&&(o=document.body.offsetWidth-r.offsetWidth-5),this.post(o,n)},c.prototype.registerWidget=function(t){this.widgets.push(t)},c.prototype.unregisterWidget=function(t){t=this.widgets.indexOf(t);-1<t&&this.widgets.splice(t,1),0===this.widgets.length&&this.unpost()},c.prototype.unpostWidgets=function(){this.widgets.forEach(function(t){return t.unpost()})},c.prototype.toJson=function(){return{type:""}},c.prototype.move_=function(t){this.anchor&&t!==this.anchor&&(this.moving=!0,this.unpost(),this.post(t),this.moving=!1)},c);function c(t){var e=s.call(this)||this;return e.factory=t,e.id="",e.moving=!1,e._store=new u.MenuStore(e),e.widgets=[],e.variablePool=new l.VariablePool,e}e.ContextMenu=i},837:function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.CssStyles=void 0;var c=o(698);!function(t){function e(t){return"."+(c.HtmlClasses[t]||t)}var o={};o[e("INFOCLOSE")]="{  top:.2em; right:.2em;}",o[e("INFOCONTENT")]="{  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}",o[e("INFO")+e("MOUSEPOST")]="{outline:none;}",o[e("INFO")]='{  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}';var n={};n[e("MENU")]="{  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}",n[e("MENUITEM")]="{  padding: 1px 2em;  background:transparent;}",n[e("MENUARROW")]="{  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}",n[e("MENUACTIVE")+" "+e("MENUARROW")]="{color:white}",n[e("MENUARROW")+e("RTL")]="{left:.5em; right:auto}",n[e("MENUCHECK")]="{  position:absolute; left:.7em;  font-family: null}",n[e("MENUCHECK")+e("RTL")]="{ right:.7em; left:auto }",n[e("MENURADIOCHECK")]="{  position:absolute; left: .7em;}",n[e("MENURADIOCHECK")+e("RTL")]="{  right: .7em; left:auto}",n[e("MENUINPUTBOX")]="{  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}",n[e("MENUINPUTBOX")+e("RTL")]="{  left: .1em;}",n[e("MENUCOMBOBOX")]="{  left:.1em; padding-bottom:.5em;}",n[e("MENUSLIDER")]="{  left: .1em;}",n[e("SLIDERVALUE")]="{  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}",n[e("SLIDERBAR")]="{  outline: none; background: #d3d3d3}",n[e("MENULABEL")]="{  padding: 1px 2em 3px 1.33em;  font-style:italic}",n[e("MENURULE")]="{  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}",n[e("MENUDISABLED")]="{  color:GrayText}",n[e("MENUACTIVE")]="{  background-color: #606872;  color: white;}",n[e("MENUDISABLED")+":focus"]="{  background-color: #E8E8E8}",n[e("MENULABEL")+":focus"]="{  background-color: #E8E8E8}",n[e("CONTEXTMENU")+":focus"]="{  outline:none}",n[e("CONTEXTMENU")+" "+e("MENUITEM")+":focus"]="{  outline:none}",n[e("SELECTIONMENU")]="{  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }",n[e("SELECTIONITEM")]="{  padding-right: 1em;}",n[e("SELECTION")]="{  right: 40%; width:50%; }",n[e("SELECTIONBOX")]="{  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}",n[e("SELECTIONDIVIDER")]="{  clear: both; border-top: 2px solid #000000;}",n[e("MENU")+" "+e("MENUCLOSE")]="{  top:-10px; left:-10px}";var i={};i[e("MENUCLOSE")]='{  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}',i[e("MENUCLOSE")+" span"]="{  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}",i[e("MENUCLOSE")+":hover"]="{  color:white!important;  border:2px solid #CCC!important}",i[e("MENUCLOSE")+":hover span"]="{  background-color:#CCC!important}";var r=!(i[e("MENUCLOSE")+":hover:focus"]="{  outline:none}"),s=!1,a=!1;function u(t){a||(l(i,t),a=!0)}function l(t,e){var o=e||document,e=o.createElement("style");e.type="text/css";var n,i="";for(n in t)i+=n,i+=" ",i+=t[n],i+="\n";e.innerHTML=i,o.head.appendChild(e)}t.addMenuStyles=function(t){s||(l(n,t),s=!0,u(t))},t.addInfoStyles=function(t){r||(l(o,t),r=!0,u(t))}}(e.CssStyles||(e.CssStyles={}))},698:function(t,e){function o(t){return"CtxtMenu_"+t}Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlAttrs=e.HtmlClasses=void 0,e.HtmlClasses={ATTACHED:o("Attached"),CONTEXTMENU:o("ContextMenu"),MENU:o("Menu"),MENUARROW:o("MenuArrow"),MENUACTIVE:o("MenuActive"),MENUCHECK:o("MenuCheck"),MENUCLOSE:o("MenuClose"),MENUCOMBOBOX:o("MenuComboBox"),MENUDISABLED:o("MenuDisabled"),MENUFRAME:o("MenuFrame"),MENUITEM:o("MenuItem"),MENULABEL:o("MenuLabel"),MENURADIOCHECK:o("MenuRadioCheck"),MENUINPUTBOX:o("MenuInputBox"),MENURULE:o("MenuRule"),MENUSLIDER:o("MenuSlider"),MOUSEPOST:o("MousePost"),RTL:o("RTL"),INFO:o("Info"),INFOCLOSE:o("InfoClose"),INFOCONTENT:o("InfoContent"),INFOSIGNATURE:o("InfoSignature"),INFOTITLE:o("InfoTitle"),SLIDERVALUE:o("SliderValue"),SLIDERBAR:o("SliderBar"),SELECTION:o("Selection"),SELECTIONBOX:o("SelectionBox"),SELECTIONMENU:o("SelectionMenu"),SELECTIONDIVIDER:o("SelectionDivider"),SELECTIONITEM:o("SelectionItem")},e.HtmlAttrs={COUNTER:o("Counter"),KEYDOWNFUNC:o("keydownFunc"),CONTEXTMENUFUNC:o("contextmenuFunc"),OLDTAB:o("Oldtabindex"),TOUCHFUNC:o("TouchFunc")}},932:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Info=void 0;var r,s=o(725),a=o(698),i=(r=o(757).AbstractPostable,i(u,r),u.prototype.attachMenu=function(t){this.menu=t},u.prototype.generateHtml=function(){r.prototype.generateHtml.call(this);var t=this.html;t.appendChild(this.generateTitle()),t.appendChild(this.contentDiv),t.appendChild(this.generateSignature()),t.appendChild(this.close.html),t.setAttribute("tabindex","0")},u.prototype.post=function(){r.prototype.post.call(this);var t=document.documentElement,e=this.html,o=window.innerHeight||t.clientHeight||t.scrollHeight||0,t=Math.floor(-e.offsetWidth/2),o=Math.floor((o-e.offsetHeight)/3);e.setAttribute("style","margin-left: "+t+"px; top: "+o+"px;"),window.event instanceof MouseEvent&&e.classList.add(a.HtmlClasses.MOUSEPOST),e.focus()},u.prototype.display=function(){this.menu.registerWidget(this),this.contentDiv.innerHTML=this.content();var t=this.menu.html;t.parentNode&&t.parentNode.removeChild(t),this.menu.frame.appendChild(this.html)},u.prototype.click=function(t){},u.prototype.keydown=function(t){this.bubbleKey(),r.prototype.keydown.call(this,t)},u.prototype.escape=function(t){this.unpost()},u.prototype.unpost=function(){r.prototype.unpost.call(this),this.html.classList.remove(a.HtmlClasses.MOUSEPOST),this.menu.unregisterWidget(this)},u.prototype.generateClose=function(){var t=new s.CloseButton(this),e=t.html;return e.classList.add(a.HtmlClasses.INFOCLOSE),e.setAttribute("aria-label","Close Dialog Box"),t},u.prototype.generateTitle=function(){var t=document.createElement("span");return t.innerHTML=this.title,t.classList.add(a.HtmlClasses.INFOTITLE),t},u.prototype.generateContent=function(){var t=document.createElement("div");return t.classList.add(a.HtmlClasses.INFOCONTENT),t.setAttribute("tabindex","0"),t},u.prototype.generateSignature=function(){var t=document.createElement("span");return t.innerHTML=this.signature,t.classList.add(a.HtmlClasses.INFOSIGNATURE),t},u.prototype.toJson=function(){return{type:""}},u);function u(t,e,o){var n=r.call(this)||this;return n.title=t,n.signature=o,n.className=a.HtmlClasses.INFO,n.role="dialog",n.contentDiv=n.generateContent(),n.close=n.generateClose(),n.content=e||function(){return""},n}e.Info=i},177:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Checkbox=void 0;var r,s=o(467),a=o(865),u=o(698),i=(r=s.AbstractVariableItem,i(l,r),l.fromJson=function(t,e,o){return new this(o,e.content,e.variable,e.id)},l.prototype.executeAction=function(){this.variable.setValue(!this.variable.getValue()),a.MenuUtil.close(this)},l.prototype.generateSpan=function(){this.span=document.createElement("span"),this.span.textContent="✓",this.span.classList.add(u.HtmlClasses.MENUCHECK)},l.prototype.updateAria=function(){this.html.setAttribute("aria-checked",this.variable.getValue()?"true":"false")},l.prototype.updateSpan=function(){this.span.style.display=this.variable.getValue()?"":"none"},l.prototype.toJson=function(){return{type:""}},l);function l(t,e,o,n){n=r.call(this,t,"checkbox",e,n)||this;return n.role="menuitemcheckbox",n.variable=t.pool.lookup(o),n.register(),n}e.Checkbox=i},253:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Combo=void 0;var r,s=o(467),a=o(865),u=o(698),l=o(635),i=(r=s.AbstractVariableItem,i(c,r),c.fromJson=function(t,e,o){return new this(o,e.content,e.variable,e.id)},c.prototype.executeAction=function(){this.variable.setValue(this.input.value,a.MenuUtil.getActiveElement(this))},c.prototype.space=function(t){r.prototype.space.call(this,t),a.MenuUtil.close(this)},c.prototype.focus=function(){r.prototype.focus.call(this),this.input.focus()},c.prototype.unfocus=function(){r.prototype.unfocus.call(this),this.updateSpan()},c.prototype.generateHtml=function(){r.prototype.generateHtml.call(this),this.html.classList.add(u.HtmlClasses.MENUCOMBOBOX)},c.prototype.generateSpan=function(){this.span=document.createElement("span"),this.span.classList.add(u.HtmlClasses.MENUINPUTBOX),this.input=document.createElement("input"),this.input.addEventListener("keydown",this.inputKey.bind(this)),this.input.setAttribute("size","10em"),this.input.setAttribute("type","text"),this.input.setAttribute("tabindex","-1"),this.span.appendChild(this.input)},c.prototype.inputKey=function(t){this.bubbleKey(),this.inputEvent=!0},c.prototype.keydown=function(t){if(this.inputEvent&&t.keyCode!==l.KEY.ESCAPE&&t.keyCode!==l.KEY.RETURN)return this.inputEvent=!1,void t.stopPropagation();r.prototype.keydown.call(this,t),t.stopPropagation()},c.prototype.updateAria=function(){},c.prototype.updateSpan=function(){var e;try{e=this.variable.getValue(a.MenuUtil.getActiveElement(this))}catch(t){e=""}this.input.value=e},c.prototype.toJson=function(){return{type:""}},c);function c(t,e,o,n){n=r.call(this,t,"combobox",e,n)||this;return n.role="combobox",n.inputEvent=!1,n.variable=t.pool.lookup(o),n.register(),n}e.Combo=i},665:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Command=void 0;var r,s=o(341),a=o(865),i=(r=s.AbstractItem,i(u,r),u.fromJson=function(t,e,o){return new this(o,e.content,e.action,e.id)},u.prototype.executeAction=function(){try{this.command(a.MenuUtil.getActiveElement(this))}catch(t){a.MenuUtil.error(t,"Illegal command callback.")}a.MenuUtil.close(this)},u.prototype.toJson=function(){return{type:""}},u);function u(t,e,o,n){n=r.call(this,t,"command",e,n)||this;return n.command=o,n}e.Command=i},233:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var r,s=o(341),a=o(698),i=(r=s.AbstractItem,i(u,r),u.fromJson=function(t,e,o){return new this(o,e.content,e.id)},u.prototype.generateHtml=function(){r.prototype.generateHtml.call(this),this.html.classList.add(a.HtmlClasses.MENULABEL)},u.prototype.toJson=function(){return{type:""}},u);function u(t,e,o){return r.call(this,t,"label",e,o)||this}e.Label=i},348:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Radio=void 0;var r,s=o(467),a=o(865),u=o(698),i=(r=s.AbstractVariableItem,i(l,r),l.fromJson=function(t,e,o){return new this(o,e.content,e.variable,e.id)},l.prototype.executeAction=function(){this.variable.setValue(this.id),a.MenuUtil.close(this)},l.prototype.generateSpan=function(){this.span=document.createElement("span"),this.span.textContent="✓",this.span.classList.add(u.HtmlClasses.MENURADIOCHECK)},l.prototype.updateAria=function(){this.html.setAttribute("aria-checked",this.variable.getValue()===this.id?"true":"false")},l.prototype.updateSpan=function(){this.span.style.display=this.variable.getValue()===this.id?"":"none"},l.prototype.toJson=function(){return{type:""}},l);function l(t,e,o,n){n=r.call(this,t,"radio",e,n)||this;return n.role="menuitemradio",n.variable=t.pool.lookup(o),n.register(),n}e.Radio=i},156:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rule=void 0;var r,s=o(612),a=o(698),i=(r=s.AbstractEntry,i(u,r),u.fromJson=function(t,e,o){return new this(o)},u.prototype.generateHtml=function(){r.prototype.generateHtml.call(this);var t=this.html;t.classList.add(a.HtmlClasses.MENURULE),t.setAttribute("aria-orientation","vertical")},u.prototype.addEvents=function(t){},u.prototype.toJson=function(){return{type:"rule"}},u);function u(t){t=r.call(this,t,"rule")||this;return t.className=a.HtmlClasses.MENUITEM,t.role="separator",t}e.Rule=i},129:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var r,s=o(467),a=o(865),u=o(698),l=o(635),i=(r=s.AbstractVariableItem,i(c,r),c.fromJson=function(t,e,o){return new this(o,e.content,e.variable,e.id)},c.prototype.executeAction=function(){this.variable.setValue(this.input.value,a.MenuUtil.getActiveElement(this)),this.update()},c.prototype.space=function(t){r.prototype.space.call(this,t),a.MenuUtil.close(this)},c.prototype.focus=function(){r.prototype.focus.call(this),this.input.focus()},c.prototype.unfocus=function(){r.prototype.unfocus.call(this),this.updateSpan()},c.prototype.generateHtml=function(){r.prototype.generateHtml.call(this),this.html.classList.add(u.HtmlClasses.MENUSLIDER),this.valueSpan=document.createElement("span"),this.valueSpan.setAttribute("id",this.valueId),this.valueSpan.classList.add(u.HtmlClasses.SLIDERVALUE),this.html.appendChild(this.valueSpan)},c.prototype.generateSpan=function(){this.span=document.createElement("span"),this.labelSpan=document.createElement("span"),this.labelSpan.setAttribute("id",this.labelId),this.labelSpan.appendChild(this.html.childNodes[0]),this.html.appendChild(this.labelSpan),this.input=document.createElement("input"),this.input.setAttribute("type","range"),this.input.setAttribute("min","0"),this.input.setAttribute("max","100"),this.input.setAttribute("aria-valuemin","0"),this.input.setAttribute("aria-valuemax","100"),this.input.setAttribute("aria-labelledby",this.labelId),this.input.addEventListener("keydown",this.inputKey.bind(this)),this.input.addEventListener("input",this.executeAction.bind(this)),this.input.classList.add(u.HtmlClasses.SLIDERBAR),this.span.appendChild(this.input)},c.prototype.inputKey=function(t){this.inputEvent=!0},c.prototype.mousedown=function(t){t.stopPropagation()},c.prototype.mouseup=function(t){event.stopPropagation()},c.prototype.keydown=function(t){var e=t.keyCode;return e===l.KEY.UP||e===l.KEY.DOWN?(t.preventDefault(),void r.prototype.keydown.call(this,t)):(this.inputEvent&&e!==l.KEY.ESCAPE&&e!==l.KEY.RETURN?this.inputEvent=!1:r.prototype.keydown.call(this,t),void t.stopPropagation())},c.prototype.updateAria=function(){var t=this.variable.getValue();t&&this.input&&(this.input.setAttribute("aria-valuenow",t),this.input.setAttribute("aria-valuetext",t+"%"))},c.prototype.updateSpan=function(){var e;try{e=this.variable.getValue(a.MenuUtil.getActiveElement(this)),this.valueSpan.innerHTML=e+"%"}catch(t){e=""}this.input.value=e},c.prototype.toJson=function(){return{type:""}},c);function c(t,e,o,n){n=r.call(this,t,"slider",e,n)||this;return n.role="slider",n.labelId="ctx_slideLabel"+a.MenuUtil.counter(),n.valueId="ctx_slideValue"+a.MenuUtil.counter(),n.inputEvent=!1,n.variable=t.pool.lookup(o),n.register(),n}e.Slider=i},745:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Submenu=void 0;var r,s=o(341),a=o(698),i=(r=s.AbstractItem,i(u,r),u.fromJson=function(t,e,o){var n=e.content,i=e.menu,e=new this(o,n,e.id),i=t.get("subMenu")(t,i,e);return e.submenu=i,e},Object.defineProperty(u.prototype,"submenu",{get:function(){return this._submenu},set:function(t){this._submenu=t},enumerable:!1,configurable:!0}),u.prototype.mouseover=function(t){this.focus(),this.stop(t)},u.prototype.mouseout=function(t){this.stop(t)},u.prototype.unfocus=function(){if(this.submenu.isPosted()){if(this.menu.focused!==this)return r.prototype.unfocus.call(this),void this.menu.unpostSubmenus();this.html.setAttribute("tabindex","-1"),this.html.blur()}else r.prototype.unfocus.call(this)},u.prototype.focus=function(){r.prototype.focus.call(this),this.submenu.isPosted()||this.disabled||this.submenu.post()},u.prototype.executeAction=function(){this.submenu.isPosted()?this.submenu.unpost():this.submenu.post()},u.prototype.generateHtml=function(){r.prototype.generateHtml.call(this);var t=this.html;this.span=document.createElement("span"),this.span.textContent="►",this.span.classList.add(a.HtmlClasses.MENUARROW),t.appendChild(this.span),t.setAttribute("aria-haspopup","true")},u.prototype.left=function(t){this.submenu.isPosted()?this.submenu.unpost():r.prototype.left.call(this,t)},u.prototype.right=function(t){this.submenu.isPosted()?this.submenu.down(t):this.submenu.post()},u.prototype.toJson=function(){return{type:""}},u);function u(t,e,o){o=r.call(this,t,"submenu",e,o)||this;return o._submenu=null,o}e.Submenu=i},635:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.KEY=void 0,(e=e.KEY||(e.KEY={}))[e.RETURN=13]="RETURN",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN"},943:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.MenuElement=void 0;var r,i=(r=o(817).AbstractNavigatable,i(s,r),s.prototype.addAttributes=function(t){for(var e in t)this.html.setAttribute(e,t[e])},Object.defineProperty(s.prototype,"html",{get:function(){return this._html||this.generateHtml(),this._html},set:function(t){this._html=t,this.addEvents(t)},enumerable:!1,configurable:!0}),s.prototype.generateHtml=function(){var t=document.createElement("div");t.classList.add(this.className),t.setAttribute("role",this.role),this.html=t},s.prototype.focus=function(){var t=this.html;t.setAttribute("tabindex","0"),t.focus()},s.prototype.unfocus=function(){var t=this.html;t.hasAttribute("tabindex")&&t.setAttribute("tabindex","-1");try{t.blur()}catch(t){}t.blur()},s);function s(){return null!==r&&r.apply(this,arguments)||this}e.MenuElement=i},525:function(t,e,o){var a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuStore=void 0;var n=o(865),i=o(698),r=o(635),o=(Object.defineProperty(s.prototype,"active",{get:function(){return this._active},set:function(t){do{if(-1!==this.store.indexOf(t)){this._active=t;break}}while(t=t.parentNode)},enumerable:!1,configurable:!0}),s.prototype.next=function(){var t=this.store.length;if(0===t)return this.active=null;var e=-1!==(e=this.store.indexOf(this.active))&&e<t-1?e+1:0;return this.active=this.store[e],this.active},s.prototype.previous=function(){var t=this.store.length;if(0===t)return this.active=null;var e=t-1,t=-1===(t=this.store.indexOf(this.active))||0===t?e:t-1;return this.active=this.store[t],this.active},s.prototype.clear=function(){this.remove(this.store)},s.prototype.insert=function(t){var e,o,n=t instanceof HTMLElement?[t]:t;try{for(var i=a(n),r=i.next();!r.done;r=i.next()){var s=r.value;this.insertElement(s)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}this.sort()},s.prototype.remove=function(t){var e,o,n=t instanceof HTMLElement?[t]:t;try{for(var i=a(n),r=i.next();!r.done;r=i.next()){var s=r.value;this.removeElement(s)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}this.sort()},s.prototype.inTaborder=function(t){this.taborder&&!t&&this.removeTaborder(),!this.taborder&&t&&this.insertTaborder(),this.taborder=t},s.prototype.insertTaborder=function(){this.taborder&&this.insertTaborder_()},s.prototype.removeTaborder=function(){this.taborder&&this.removeTaborder_()},s.prototype.insertElement=function(t){t.classList.contains(this.attachedClass)||(t.classList.add(this.attachedClass),this.taborder&&this.addTabindex(t),this.addEvents(t))},s.prototype.removeElement=function(t){t.classList.contains(this.attachedClass)&&(t.classList.remove(this.attachedClass),this.taborder&&this.removeTabindex(t),this.removeEvents(t))},s.prototype.sort=function(){var t=document.getElementsByClassName(this.attachedClass);this.store=[].slice.call(t)},s.prototype.insertTaborder_=function(){this.store.forEach(function(t){return t.setAttribute("tabindex","0")})},s.prototype.removeTaborder_=function(){this.store.forEach(function(t){return t.setAttribute("tabindex","-1")})},s.prototype.addTabindex=function(t){t.hasAttribute("tabindex")&&t.setAttribute(i.HtmlAttrs.OLDTAB,t.getAttribute("tabindex")),t.setAttribute("tabindex","0")},s.prototype.removeTabindex=function(t){t.hasAttribute(i.HtmlAttrs.OLDTAB)?(t.setAttribute("tabindex",t.getAttribute(i.HtmlAttrs.OLDTAB)),t.removeAttribute(i.HtmlAttrs.OLDTAB)):t.removeAttribute("tabindex")},s.prototype.addEvents=function(t){t.hasAttribute(i.HtmlAttrs.COUNTER)||(this.addEvent(t,"contextmenu",this.menu.post.bind(this.menu)),this.addEvent(t,"keydown",this.keydown.bind(this)),t.setAttribute(i.HtmlAttrs.COUNTER,this.counter.toString()),this.counter++)},s.prototype.addEvent=function(t,e,o){var n=i.HtmlAttrs[e.toUpperCase()+"FUNC"];this.attrMap[n+this.counter]=o,t.addEventListener(e,o)},s.prototype.removeEvents=function(t){var e;t.hasAttribute(i.HtmlAttrs.COUNTER)&&(e=t.getAttribute(i.HtmlAttrs.COUNTER),this.removeEvent(t,"contextmenu",e),this.removeEvent(t,"keydown",e),t.removeAttribute(i.HtmlAttrs.COUNTER))},s.prototype.removeEvent=function(t,e,o){var n=i.HtmlAttrs[e.toUpperCase()+"FUNC"],o=this.attrMap[n+o];t.removeEventListener(e,o)},s.prototype.keydown=function(t){t.keyCode===r.KEY.SPACE&&(this.menu.post(t),t.preventDefault(),t.stopImmediatePropagation())},s);function s(t){this.menu=t,this.store=[],this._active=null,this.counter=0,this.attachedClass=i.HtmlClasses.ATTACHED+"_"+n.MenuUtil.counter(),this.taborder=!0,this.attrMap={}}e.MenuStore=o},865:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MenuUtil=void 0,function(t){t.close=function(t){t=t.menu;(t.baseMenu||t).unpost()},t.getActiveElement=function(t){t=t.menu;return(t.baseMenu||t).store.active},t.error=function(t,e){console.error("ContextMenu Error: "+e)},t.counter=function(){return e++};var e=0}(e.MenuUtil||(e.MenuUtil={}))},674:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MOUSE=void 0,e.MOUSE={CLICK:"click",DBLCLICK:"dblclick",DOWN:"mousedown",UP:"mouseup",OVER:"mouseover",OUT:"mouseout",MOVE:"mousemove",SELECTEND:"selectend",SELECTSTART:"selectstart"}},258:function(t,e,o){var i=this&&this.__rest||function(t,e){var o={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(o[i[n]]=t[i[n]]);return o},n=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=r.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var s=o(665),a=o(964),u=o(842),l=o(177),p=o(253),h=o(233),d=o(348),f=o(745),m=o(156),y=o(129),b=o(42),v=o(365),g=o(534),o=(Object.defineProperty(x.prototype,"factory",{get:function(){return this._factory},enumerable:!1,configurable:!0}),x.prototype.items=function(t,e,o){var n,i,r=[];try{for(var s=c(e),a=s.next();!a.done;a=s.next()){var u=a.value,l=this.parse(u,o);l&&(o.items.push(l),u.disabled&&l.disable(),u.hidden&&r.push(l))}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r.forEach(function(t){return t.hide()}),o.items},x.prototype.parse=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=t.type,t=i(t,["type"]),n=this.factory.get(n);return n?n.apply(void 0,r([this.factory,t],e)):null},x);function x(t){var o=this;void 0===t&&(t=[]),this._initList=[["command",s.Command.fromJson.bind(s.Command)],["checkbox",l.Checkbox.fromJson.bind(l.Checkbox)],["combo",p.Combo.fromJson.bind(p.Combo)],["slider",y.Slider.fromJson.bind(y.Slider)],["label",h.Label.fromJson.bind(h.Label)],["radio",d.Radio.fromJson.bind(d.Radio)],["rule",m.Rule.fromJson.bind(m.Rule)],["submenu",f.Submenu.fromJson.bind(f.Submenu)],["contextMenu",a.ContextMenu.fromJson.bind(a.ContextMenu)],["subMenu",b.SubMenu.fromJson.bind(b.SubMenu)],["variable",u.Variable.fromJson.bind(u.Variable)],["items",this.items.bind(this)],["selectionMenu",v.SelectionMenu.fromJson.bind(v.SelectionMenu)],["selectionBox",v.SelectionBox.fromJson.bind(v.SelectionBox)]],this._factory=new g.ParserFactory(this._initList),t.forEach(function(t){var e=n(t,2),t=e[0],e=e[1];return o.factory.add(t,e)})}e.Parser=o},534:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParserFactory=void 0;var o=(n.prototype.get=function(t){return this._parser.get(t)},n.prototype.add=function(t,e){this._parser.set(t,e)},n);function n(t){this._parser=new Map(t)}e.ParserFactory=o},365:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=r.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionBox=e.SelectionMenu=void 0;var r,s=o(865),a=o(698),u=o(585),o=o(932),u=(r=u.AbstractMenu,i(l,r),l.fromJson=function(e,t,o){var n=t.title,i=t.values,r=t.variable,s=new this(o),o=e.get("label")(e,{content:n||"",id:n||"id"},s),n=e.get("rule")(e,{},s),i=i.map(function(t){return e.get("radio")(e,{content:t,variable:r,id:t},s)}),i=[o,n].concat(i);return s.items=i,s},l.prototype.generateHtml=function(){r.prototype.generateHtml.call(this),this.items.forEach(function(t){return t.html.classList.add(a.HtmlClasses.SELECTIONITEM)})},l.prototype.display=function(){},l.prototype.right=function(t){this.anchor.right(t)},l.prototype.left=function(t){this.anchor.left(t)},l);function l(t){var e=r.call(this)||this;return e.anchor=t,e.className=a.HtmlClasses.SELECTIONMENU,e.variablePool=e.anchor.menu.pool,e.baseMenu=e.anchor.menu,e}e.SelectionMenu=u;var p,i=(p=o.Info,i(h,p),h.fromJson=function(e,t,o){var n=t.title,i=t.signature,r=t.selections,s=new this(n,i,t.order,t.grid);s.attachMenu(o);r=r.map(function(t){return e.get("selectionMenu")(e,t,s)});return s.selections=r,s},h.prototype.attachMenu=function(t){this.menu=t},Object.defineProperty(h.prototype,"selections",{get:function(){return this._selections},set:function(t){var e=this;this._selections=[],t.forEach(function(t){return e.addSelection(t)})},enumerable:!1,configurable:!0}),h.prototype.addSelection=function(t){(t.anchor=this)._selections.push(t)},h.prototype.rowDiv=function(t){var e=this,o=document.createElement("div");this.contentDiv.appendChild(o);var n=t.map(function(t){return o.appendChild(t.html),t.html.id||(t.html.id=e.prefix+s.MenuUtil.counter()),t.html.getBoundingClientRect()}),i=n.map(function(t){return t.width}),t=i.reduce(function(t,e){return t+e},0),n=n.reduce(function(t,e){return Math.max(t,e.height)},0);return o.classList.add(a.HtmlClasses.SELECTIONDIVIDER),o.setAttribute("style","height: "+n+"px;"),[o,t,n,i]},h.prototype.display=function(){if(p.prototype.display.call(this),this.order(),this.selections.length){for(var r=[],s=0,a=[],u=this.getChunkSize(this.selections.length),l=this,t=0;t<this.selections.length;t+=u)!function(t){var e=l.selections.slice(t,t+u),o=c(l.rowDiv(e),4),n=o[0],t=o[1],i=o[2],o=o[3];r.push(n),s=Math.max(s,t),e.forEach(function(t){return t.html.style.height=i+"px"}),a=l.combineColumn(a,o)}(t);this._balanced&&(this.balanceColumn(r,a),s=a.reduce(function(t,e){return t+e},20)),r.forEach(function(t){return t.style.width=s+"px"})}},h.prototype.getChunkSize=function(t){switch(this.grid){case"square":return Math.floor(Math.sqrt(t));case"horizontal":return Math.floor(t/h.chunkSize);case"vertical":default:return h.chunkSize}},h.prototype.balanceColumn=function(t,i){t.forEach(function(t){for(var e=Array.from(t.children),o=0,n=void 0;n=e[o];o++)n.style.width=i[o]+"px"})},h.prototype.combineColumn=function(t,e){for(var o=[],n=0;t[n]||e[n];){if(!t[n]){o=o.concat(e.slice(n));break}if(!e[n]){o=o.concat(t.slice(n));break}o.push(Math.max(t[n],e[n])),n++}return o},h.prototype.left=function(t){var e=this;this.move(t,function(t){return(0===t?e.selections.length:t)-1})},h.prototype.right=function(t){var e=this;this.move(t,function(t){return t===e.selections.length-1?0:t+1})},h.prototype.generateHtml=function(){p.prototype.generateHtml.call(this),this.html.classList.add(a.HtmlClasses.SELECTION)},h.prototype.generateContent=function(){var t=p.prototype.generateContent.call(this);return t.classList.add(a.HtmlClasses.SELECTIONBOX),t.removeAttribute("tabindex"),t},h.prototype.findSelection=function(t){var e,o=t.target,t=null;return(t=o.id?this.selections.find(function(t){return t.html.id===o.id}):t)||(e=o.parentElement.id,t=this.selections.find(function(t){return t.html.id===e})),t},h.prototype.move=function(t,e){t=this.findSelection(t);t.focused&&t.focused.unfocus();t=e(this.selections.indexOf(t));this.selections[t].focus()},h.prototype.order=function(){this.selections.sort(h.orderMethod.get(this.style))},h.prototype.toJson=function(){return{type:""}},h.chunkSize=4,h.orderMethod=new Map([["alphabetical",function(t,e){return t.items[0].content.localeCompare(e.items[0].content)}],["none",function(t,e){return 1}],["decreasing",function(t,e){t=t.items.length,e=e.items.length;return t<e?1:e<t?-1:0}],["increasing",function(t,e){t=t.items.length,e=e.items.length;return t<e?-1:e<t?1:0}]]),h);function h(t,e,o,n){void 0===o&&(o="none"),void 0===n&&(n="vertical");e=p.call(this,t,null,e)||this;return e.style=o,e.grid=n,e._selections=[],e.prefix="ctxt-selection",e._balanced=!0,e}e.SelectionBox=i},42:function(t,e,o){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.SubMenu=void 0;var s,i=(s=o(585).AbstractMenu,i(r,s),r.fromJson=function(t,e,o){e=e.items,o=new this(o),e=t.get("items")(t,e,o);return o.items=e,o},Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},enumerable:!1,configurable:!0}),r.prototype.post=function(){if(this.anchor.menu.isPosted()){for(var t=this.anchor.html,e=this.html,o=this.baseMenu.frame,n=t.offsetWidth,i=n-2,r=0;t&&t!==o;)i+=t.offsetLeft,r+=t.offsetTop,t=t.parentNode;i+e.offsetWidth>document.body.offsetWidth-5&&(i=Math.max(5,i-n-e.offsetWidth+6)),s.prototype.post.call(this,i,r)}},r.prototype.display=function(){this.baseMenu.frame.appendChild(this.html)},r.prototype.setBaseMenu=function(){for(var t=this;(t=t.anchor.menu)instanceof r;);this.baseMenu=t},r.prototype.left=function(t){this.focused=null,this.anchor.focus()},r.prototype.toJson=function(){return{type:""}},r);function r(t){var e=s.call(this)||this;return e._anchor=t,e.variablePool=e.anchor.menu.pool,e.setBaseMenu(),e}e.SubMenu=i},842:function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;var n=o(865),o=(i.fromJson=function(t,e,o){e=new this(e.name,e.getter,e.setter);o.insert(e)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i.prototype.getValue=function(t){try{return this.getter(t)}catch(t){return n.MenuUtil.error(t,"Command of variable "+this.name+" failed."),null}},i.prototype.setValue=function(t,e){try{this.setter(t,e)}catch(t){n.MenuUtil.error(t,"Command of variable "+this.name+" failed.")}this.update()},i.prototype.register=function(t){-1===this.items.indexOf(t)&&this.items.push(t)},i.prototype.unregister=function(t){t=this.items.indexOf(t);-1!==t&&this.items.splice(t,1)},i.prototype.update=function(){this.items.forEach(function(t){return t.update()})},i.prototype.registerCallback=function(e){this.items.forEach(function(t){return t.registerCallback(e)})},i.prototype.unregisterCallback=function(e){this.items.forEach(function(t){return t.unregisterCallback(e)})},i.prototype.toJson=function(){return{type:"variable",name:this.name,getter:this.getter.toString(),setter:this.setter.toString()}},i);function i(t,e,o){this._name=t,this.getter=e,this.setter=o,this.items=[]}e.Variable=o},79:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariablePool=void 0;var o=(n.prototype.insert=function(t){this.pool[t.name]=t},n.prototype.lookup=function(t){return this.pool[t]},n.prototype.remove=function(t){delete this.pool[t]},n.prototype.update=function(){for(var t in this.pool)this.pool[t].update()},n);function n(){this.pool={}}e.VariablePool=o}},a={};function u(t){var e=a[t];if(void 0!==e)return e.exports;e=a[t]={exports:{}};return s[t].call(e.exports,e,e.exports,u),e.exports}t=u(723),e=u(21),o=u(62),n=u(3),i=u(232),r=u(309),(0,t.combineWithMathJax)({_:{ui:{menu:{MJContextMenu:e,Menu:o,MenuHandler:n,MmlVisitor:i,SelectableInfo:r}}}}),MathJax.startup&&"undefined"!=typeof window&&MathJax.startup.extendHandler(function(t){return(0,n.MenuHandler)(t)},20)}();